{% extends "base.html" %}
{% load static %}


{% block css %}

{% endblock css %}

{% load crispy_forms_tags %}
{% block pageContent %}
<div class="container">
    <div class="container">
        <h1 class="h1 text-bolder">Generate Advertisement</h1>
        <div class="row">
            <div class="col-md-6">
                <form method="post" name="descriptive" id="descriptiveForm">
                    {% csrf_token %}
                    <fieldset class="form-group">
                        <legend class="border-bottom mb-4 main-t">Generate Description Based</legend>
                        {{ descriptive_form|crispy }}
                    </fieldset>
                    <div class="form-group">
                        <button class="btn btn-outline-info" name="descriptive_form_submit" type="submit" on>
                            Generate Advertisement
                        </button>
                    </div>
                    
                </form>
            </div>
            <div class="ml-1 col-md-6">
                <form method="post" name="large" id="largeForm">
                    {% csrf_token %}
                    <fieldset class="form-group">
                        <legend class="border-bottom mb-4 main-t">Generate Large Advertisements</legend>
                        {{ large_form|crispy }}
                    </fieldset>
                    <div class="form-group">
                        <button class="btn btn-outline-info" name="large_form_submit" type="submit">
                            Generate Large ads
                        </button>
                    </div>
                    
                </form>
            </div>
            <div class="mt-3 col-md-12" style="height: 80%; overflow-y: scroll;">
                {% if adsDf %}
                    {{ adsDf | safe }}
                {% endif %}
            </div>

        </div>
    </div>
</div>
{% endblock pageContent %}

{% block javascript %}

<script>

    document.getElementById('descriptiveForm').addEventListener('submit', function(event) {
        event.preventDefault(); // Prevent the form from being submitted

        // Perform form validation
        if (validateForm()) {
            this.submit(); // Submit the form if validation succeeds
        }
    });



    function validateForm() {
        // Perform form validation logic
        // Return true if the form is valid, false otherwise
        var description_text = document.getElementById('id_description_text').value;
        

        // Perform validation checks
        if (description_text === '') {
            alert('Description Text must be added for the field');
            return false;
        }


        return true;
    }

    document.getElementById('largeForm').addEventListener('submit', function(event) {
        event.preventDefault(); // Prevent the form from being submitted

        // Perform form validation
        if (validateLarge()) {
            this.submit(); // Submit the form if validation succeeds
        }
    });

    function validateLarge() {
        // Perform form validation logic
        // Return true if the form is valid, false otherwise
        var template = document.getElementById('id_template').value;
        var replacements = document.getElementById('id_replacements').value;
        var fallback = document.getElementById('id_fallback').value;
        

        // Perform validation checks
        if (description_text === '' || replacements === '' || fallback === '') {
            alert('Template, replacements, fallback should not be empty for large Ads form');
            return false;
        }


        return true;
    }
</script>


{% endblock javascript %}