{% extends "base.html" %}
{% load static %}


{% block css %}

{% endblock css %}

{% load crispy_forms_tags %}
{% block pageContent %}
<div class="container">
    <div class="container">
        <div class="row d-flex justify-content-center">
            <div class="col-md-6">
                <form method="post">
                    {% csrf_token %}
                    <fieldset class="form-group">
                        <legend class="border-bottom mb-4 main-t">Convert Robots.txt to dataframe</legend>
                        {{ form|crispy }}
                    </fieldset>
                    <div class="form-group">
                        <button class="btn btn-outline-info" type="submit">
                            Get Robots
                        </button>
                    </div>
                    
                </form>
            </div>

            

            
            <div id="filterContainer" class="mt-3"></div>
            <div id="robo" class="col-md-12 mt-3" style="height: 600px; overflow-y: scroll;">
                {% if roboDf %}
                    {{ roboDf | safe }}
                {% endif %}
            </div>

        </div>
    </div>
</div>
{% endblock pageContent %}

{% block javascript %}

<script>

    console.log(dTable);
    // Get unique values from a specific column
    var uniqueValues = dTable.column(0).data().unique();
    console.log(uniqueValues);
    // Generate filter options
    var filterOptions = '<option value="">All</option>';
    uniqueValues.each(function(value) {
    filterOptions += '<option value="' + value + '">' + value + '</option>';
    });

    // Add filter to the page
    var filterSelect = $('<select>' + filterOptions + '</select>')
    .on('change', function() {
        var filterValue = $(this).val();
        dTable.column(0).search(filterValue).draw();
    });

    // Append filter to the desired element
    $('#filterContainer').append(filterSelect);
    
</script>



{% endblock javascript %}